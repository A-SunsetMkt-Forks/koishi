---
sidebarDepth: 2
---

# 使用服务

在之前的章节中，你或许已经意识到了 Koishi 的大部分特性都是围绕上下文进行设计的——即使不同的上下文可以隶属于不同的插件、配置了不同的过滤器，但许多功能在不同的上下文中访问的效果是一致的。换言之，应用其实可以被理解成一个容器，搭载了各种各样的功能（如数据库和适配器等），而上下文则单纯提供了一个接口来访问它们。这种组织形式被称为**服务（Service）**。

对于已经有 IoC / DI 概念的同学来说，服务就是一种类似于 IoC 的实现（但并非通过 DI 实现，具体实现方式会在下面介绍）。Service API 通过一种 TypeScript 特有的语法提供了容器内服务的快速访问。

## 内置的服务

Koishi 规范化了一系列内置服务。它们可以分为两种类型：

第一种是由 koishi 直接自带的服务。

- ctx.bots
- ctx.http
- ctx.router

第二种是由 Koishi 所定义但并未实现的服务。你可以选择适当的插件来实现它们。在你安装相应的插件之前，相关的功能是无法正常运行的。

- ctx.assets
- ctx.cache
- ctx.database

相关的插件名通常以服务名作为前缀，例如 assets-local, cache-redis, database-mysql 等等。这并非强制的要求，但我们建议插件开发者也都遵循这个规范，这有助于让使用者对你插件的功能建立一个更明确的认识。

值得注意的是，Koishi 内置官方插件 @koishijs/plugin-cache-lru。你依然可以通过安装其他缓存插件覆盖默认的实现，但即使你不这样做你也可以正常使用 Cache API。
